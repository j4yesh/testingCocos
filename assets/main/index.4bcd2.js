window.__require=function t(e,o,n){function r(c,p){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var s="function"==typeof __require&&__require;if(!p&&s)return s(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({HelloWorld:[function(t,e){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(){}}),cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"50941PxschHRaaXaZeKXzYO","game");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,p=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e.starPrefab=null,e.maxStarDuration=0,e.minStarDuration=0,e.player=null,e.ground=null,e.scoreAudio=null,e.groundY=0,e.score=0,e.starDuration=3,e.timer=0,e.endCounter=0,e}return r(e,t),e.prototype.onLoad=function(){this.score=0,this.groundY=this.ground.y+this.ground.height/2,this.spawnNewStar()},e.prototype.spawnNewStar=function(){var t=cc.instantiate(this.starPrefab);t.setPosition(this.getNewStarPosition()),t.getComponent("star").game=this,this.node.addChild(t)},e.prototype.getNewStarPosition=function(){var t=2*(Math.random()-.5)*(this.node.width/2),e=this.groundY+Math.random()*this.player.getComponent("player").jumpHeight+50;return cc.v2(t,e)},e.prototype.gainScore=function(){this.score+=1,this.scoreDisplay.string="Score: "+this.score,cc.audioEngine.playEffect(this.scoreAudio,!1)},e.prototype.gameOver=function(){this.scoreDisplay.string="GameOver",this.player.stopAllActions()},e.prototype.start=function(){},e.prototype.update=function(t){this.timer+=t,this.endCounter+=t,this.endCounter>this.starDuration&&("GameOver"==this.scoreDisplay.string&&cc.director.loadScene("helloworld"),this.endCounter=0),this.timer>this.starDuration&&this.gameOver()},i([a(cc.Label)],e.prototype,"label",void 0),i([a],e.prototype,"text",void 0),i([a({type:cc.Prefab})],e.prototype,"starPrefab",void 0),i([a],e.prototype,"maxStarDuration",void 0),i([a],e.prototype,"minStarDuration",void 0),i([a({type:cc.Node})],e.prototype,"player",void 0),i([a({type:cc.Node})],e.prototype,"ground",void 0),i([a(cc.AudioClip)],e.prototype,"scoreAudio",void 0),i([a(cc.Label)],e.prototype,"scoreDisplay",void 0),i([a],e.prototype,"score",void 0),i([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"15f5aiRnixFQYV+UGGHXrdX","player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,p=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e.jumpHeight=0,e.jumpDuration=0,e.maxMoveSpeed=0,e.xSpeed=0,e.acc=0,e.accLeft=!1,e.accRight=!1,e.jumpAudio=null,e.jumpAction=null,e}return r(e,t),e.prototype.start=function(){},e.prototype.playJumpSound=function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},e.prototype.setJumpAction=function(){var t=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),e=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),o=cc.callFunc(this.playJumpSound,this);return cc.repeatForever(cc.sequence(t,e,o))},e.prototype.onLoad=function(){this.jumpAction=this.setJumpAction(),this.node.runAction(this.jumpAction),this.accLeft=!1,this.accRight=!1,this.xSpeed=0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.OnKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.OnKeyUp,this)},e.prototype.OnKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!0;break;case cc.macro.KEY.d:this.accRight=!0}},e.prototype.OnKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.a:this.accLeft=!1;break;case cc.macro.KEY.d:this.accRight=!1}},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.OnKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.OnKeyUp,this)},e.prototype.update=function(t){this.accLeft?this.xSpeed-=this.acc*t:this.accRight&&(this.xSpeed+=this.acc*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t},i([a(cc.Label)],e.prototype,"label",void 0),i([a],e.prototype,"text",void 0),i([a],e.prototype,"jumpHeight",void 0),i([a],e.prototype,"jumpDuration",void 0),i([a],e.prototype,"maxMoveSpeed",void 0),i([a],e.prototype,"xSpeed",void 0),i([a],e.prototype,"acc",void 0),i([a],e.prototype,"accLeft",void 0),i([a],e.prototype,"accRight",void 0),i([a(cc.AudioClip)],e.prototype,"jumpAudio",void 0),i([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],star:[function(t,e,o){"use strict";cc._RF.push(e,"57937RkfL1C8orvihsuzzDd","star");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,p=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e.pickRadius=0,e.game=null,e}return r(e,t),e.prototype.init=function(t){this.game=t,this.enabled=!0,this.node.opacity=255},e.prototype.reuse=function(t){this.init(t)},e.prototype.getPlayerDistance=function(){if(this.game.getComponent("game").player){var t=this.game.getComponent("game").player.getPosition();return this.node.position.sub(new cc.Vec3(t.x,t.y,0)).mag()}return console.log("player not exist"),1e8},e.prototype.OnPicked=function(){this.game.getComponent("game").spawnNewStar(),this.game.getComponent("game").gainScore(),this.game.getComponent("game").timer=0,this.game.getComponent("game").endCounter=0,this.node.destroy()},e.prototype.start=function(){},e.prototype.map=function(t,e,o,n,r){return(t-e)*(r-n)/(o-e)+n},e.prototype.update=function(){this.getPlayerDistance()<this.pickRadius&&this.OnPicked(),this.node.opacity=this.map(this.game.getComponent("game").timer,0,this.game.getComponent("game").starDuration,255,0),0==this.node.opacity&&this.destroy()},i([a(cc.Label)],e.prototype,"label",void 0),i([a],e.prototype,"text",void 0),i([a],e.prototype,"pickRadius",void 0),i([a(cc.Node)],e.prototype,"game",void 0),i([p],e)}(cc.Component);o.default=s,cc._RF.pop()},{}]},{},["HelloWorld","game","player","star"]);